<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Introduction | Gamelogic Grids </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Introduction | Gamelogic Grids ">
      
      
      <link rel="icon" href="../images/gamelogic_favicon.png">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://bitbucket.org/gamelogic/gridsunity/src/master/Documentation/content/PointsAndCells.md#lines-1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

      <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-68729P67EH"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-68729P67EH');
      </script>
  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/gamelogic_icon.png" alt="Gamelogic Grids">
            Gamelogic Grids
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="introduction">Introduction</h1>

<p>This article describes the various ways to get hold of cells and grid points.</p>
<h2 id="section">Section</h2>
<p>It's useful to think of a Grid as an array or dictionary that is accessed through indices or keys. The keys, in the case of a grid, are grid points, such as <code>GridPoint2</code>. Cells are then similar to the elements of an array or the values in a dictionary.</p>
<p>From a <code>GridBehavior</code>, you can access the cell at the origin (0, 0) like this:</p>
<pre><code class="lang-csharp">var cell = Grid[new PointyHexPoint(0, 0)];
</code></pre>
<p>This is the most direct way of accessing cells, but probably the least useful.</p>
<p>For accessing all the cells in the grid, one by one, you can use the following idiom (this is all in the GridBehaviour you need to implement):</p>
<pre><code class="lang-csharp">foreach(var point in Grid.Points)
{
    var cell = Grid[point];
}
</code></pre>
<p>If you do not need the point, you can also work with cells directly, like this:</p>
<pre><code class="lang-csharp">foreach(var cell in Grid.Cells)
{
    // Your code here
}
</code></pre>
<p>To get hold of a point the player clicked on, you can use a grid event trigger. You attach it to your grid builder, and select any methods that take a <code>GridPoint2</code> as parameter in the appropriate field. It is common to define these methods in your grid behaviour. Here is an example method:</p>
<pre><code class="lang-csharp">public void OnLeftClick(GridPoint2 clickedPoint)
{
    // Your code here
}
</code></pre>
<p>See the article <a href="GridBehaviours.html">Grid Behaviours and Grid Event Triggers</a> for details on working with grid behaviours.</p>
<p>If you have a world position (a Vector3), you can use a grid map to convert it to a grid point. The grid map is also accessible from the grid behaviour.</p>
<pre><code class="lang-csharp">//inside a GridBehaviour
var gridPoint = GridMap.WorldToGridToDiscrete(worldPoint);

if(Grid.Contains(gridPoint))
{
    var cell = Grid[gridPoint];
}
</code></pre>
<p>Many algorithms produce points that you can use to access the grid.</p>
<pre><code class="lang-csharp">var path = Algorithms.AStar(...);

foreach(var point in path)
{
    var cell = Grid[point];
}
</code></pre>
<p>You can also do your own filtering on grid points:</p>
<pre><code class="lang-csharp">var closePoints = Grid.Select(p =&gt; RectPoint.ManhattanDistance(p - characterPosition) &lt; 4);

foreach(var point in closePoints)
{
    var cell = Grid[point];
}
</code></pre>
<p>And do calculations on points to get new points:</p>
<pre><code class="lang-csharp">var anotherPoint = somePoint + PointyHexPoint.NorthWest;
var cell = Grid[anotherPoint];
</code></pre>
<p>You can also find the neighbors of a point. See <a href="Neighbors.html">Neighbors</a>. Here is an example:</p>
<pre><code class="lang-csharp">var neighbors = RectPoint.GetOrthogonalNeighbors(somePoint).In(Grid);

foreach(var point in neighbors)
{
    var cell = Grid[point];
}
</code></pre>
<p>Those are the basic ways you get hold of cells. The idea is, you get hold of them through points. It's important to realize that most of your logic that has to do with position / geometry on the grid will be in terms of grid points, not cells.</p>
<h2 id="working-with-your-own-cells">Working with your own cells.</h2>
<p>The cells you will get as explained above are of type <code>TileCell</code>. You will need to cast them to your specific cell, or get your own cell component (depending on whether you chose to use inheritance or composition to define your own cell).</p>
<p>It is often useful to make a copy of the grid that will give cells of your own type:</p>
<pre><code class="lang-csharp">// MyCell extends TileCell
IGrid&lt;GridPoint2, MyCell&gt; myGrid = 
    Grid.CloneStructure&lt;MyCell&gt;(p =&gt; (MyCell) Grid[p]);

// MyCell is a component on the cell prefab next to the TileCell
IGrid&lt;GridPoint2, MyCell&gt; myGrid = 
    Grid.CloneStructure&lt;MyCell&gt;(p =&gt; Grid[p].GetComponent&lt;MyCell&gt;());
</code></pre>
<h2 id="why-can-i-not-access-points-from-cells">Why can I not access points from cells?</h2>
<p>For the same reason the elements of an array don't know their array positions, or the values in a dictionary don't know their keys, cells in a grid do not know their positions in the grids (their grid points). This generally means your algorithms should be designed on grid level, rather than cell level, which makes code a lot cleaner, especially when you need to look at other cells.</p>
<h2 id="but-i-really-need-the-point-information-in-my-cell">But I really need the point information in my cell</h2>
<p>In rare cases, you really do need the point information in your cell. If this is the case for you, you need to design your own cells to maintain this data. You need to be careful if you move cells around in the grid to keep the information up to date, and you will need to consider how to deal with cells that are not in the grid.</p>

</article>


        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
